<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/output.css">
    <script src="/js/productDetail.js" defer></script>

</head>

    <body class="bg-gray-100">

        <!-- Top Navbar -->
        <div
            class="fixed top-0 left-0 w-full h-16 bg-[#1B1254] text-white flex items-center justify-between px-4 shadow z-50 font-bold">
            <!-- Left Side: Logo and Label -->
            <div class="flex items-center space-x-4 ml-[3%]">
                <span class="text-4xl">SHOPPI</span>
                <a href="/home" class="text-white text-base hover:underline ml-6">Home</a>
                <a href="/cart" class="text-white text-base hover:underline ml-6">Cart</a>
            </div>
        </div>


        <div class="fixed left-0 w-[40%] h-[calc(100vh-4rem)] text-gray-800 p-6 space-y-2 bg-gray-100">
            <h1 class="text-2xl font-bold mb-6">Product Image</h1>
            <div id="" class="space-y-4">

                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-col md:flex-row gap-8">
                
                      <!-- Main Image Section -->
                      <div class="flex flex-col items-center">
                        <div class="relative overflow-hidden">
                          <img id="mainImage" src="http://localhost:3000/<%= product.images[0] %>" class="w-[400px] h-[400px] object-cover transition-transform duration-300" />
                        </div>
                
                        <!-- Zoom Controls -->
                        <div class="mt-4 flex gap-4">
                          <button onclick="zoomIn()" class="bg-blue-500 text-white px-4 py-2 rounded">Zoom In</button>
                          <button onclick="zoomOut()" class="bg-gray-500 text-white px-4 py-2 rounded">Zoom Out</button>
                        </div>
                      </div>
                
                      <!-- Thumbnails -->
                      <div class="flex flex-col gap-4">
                        <% for(let image of product.images) {%>
                        <img src="http://localhost:3000/<%= image %>" class="w-24 h-24 object-cover cursor-pointer border-2 border-gray-300 hover:border-blue-500" onclick="changeMainImage(this.src)" />
                        <%}%>
                        <!-- <img src="http://localhost:3000/uploads\products\1746029225284-images.jpeg" class="w-24 h-24 object-cover cursor-pointer border-2 border-gray-300 hover:border-blue-500" onclick="changeMainImage(this.src)" /> -->
                      </div>
                    </div>
                  </div>
                  
            </div>
        </div>

        <div class="ml-[40%] mt-16 p-6">
            <div class="w-full px-4">
                <div class="">
                  <!-- Right: Product Info -->
                  <div>
                    <h2 class="text-2xl font-bold mb-2"><%= product.product_name %></h2>
              
                    <!-- Ratings -->
                    <div class="flex items-center mb-2 text-yellow-500">
                      ★★★★☆ <span class="ml-2 text-gray-600 text-sm">(<%= product.ratings %> Reviews)</span>
                    </div>
              
                    <!-- Price and Discount -->
                    <div class="mb-3">
                      <span class="text-2xl font-bold text-green-600">₹<%= product.last_price %>.00</span>
                      <span class="line-through text-gray-500 ml-2">₹2<%= product.mrp %>.00</span>
                      <span class="ml-2 text-red-500">(<%= product.discount_percentage %>% OFF)</span>
                    </div>
              
                    <!-- Stock / Availability -->
                    <% if (product.stock === 0) { %>
                        <div class="text-red-600 font-semibold mb-3">Out of Stock</div>
                      <% } else { %>
                        <div class="text-green-600 font-semibold mb-3">In stock</div>
                        <% }  %>  
              
                    <!-- Add to Cart or Sold Out -->
                    <button type="button" onclick="addToCart('<%= product._id %>')" class="bg-yellow-400 hover:bg-yellow-500 text-white px-6 py-2 rounded hover:cursor-pointer" >Add to cart</button>

                    <!-- Description -->
                    <p class="text-gray-700 mb-6 mt-6"><%= product.description %></p>
                  </div>
                </div>
              
                <!-- Reviews Section -->
                <div class="mt-10">
                  <h3 class="text-xl font-semibold mb-4">Customer Reviews</h3>
                  <div class="mb-4">
                    <div class="flex items-center mb-2">
                      ★★★★☆
                      <span class="ml-2 text-sm text-gray-600">"Great product! I love it."</span>
                    </div>
                    <div class="flex items-center mb-2">
                      ★★★☆☆
                      <span class="ml-2 text-sm text-gray-600">"Good quality but a bit expensive."</span>
                    </div>
                  </div>
                </div>

                <div>
                    <h1 class="text-2xl font-bold mb-6">Related products</h1>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3  gap-6 p-4">
                        <% relatedProducts.forEach(product => { %>
                            <div onclick="goToProduct('<%= product._id %>')" class="w-full max-w-sm bg-white rounded-xl shadow-md overflow-hidden aspect-[1/1.03] flex flex-col">
                              <!-- Image -->
                              <div class="h-2/4 w-full">
                                <img src="http://localhost:3000/<%= product.images && product.images[0] ? product.images[0] : 'default.jpg' %>"
                                  alt="Product Image" class="w-full h-full object-cover">
                              </div>
                          
                              <!-- Details -->
                              <div class="h-1/3 p-4 flex flex-col justify-between">
                                <div>
                                  <h2 class="text-base font-semibold truncate"><%= product.product_name %></h2>
                          
                                  <!-- Ratings -->
                                  <div class="flex items-center space-x-1 text-yellow-500 text-sm">
                                    
                                    <span class="text-gray-500 text-xs">(<%= product.total_reviews ? product.total_reviews.length : 0 %>)</span>
                                  </div>
                          
                                  <!-- Price -->
                                  <div class="mt-1">
                                    <span class="text-lg font-bold text-green-600">₹<%= product.last_price %></span>
                                    <span class="text-sm text-gray-500 line-through ml-2">₹<%= product.mrp %></span>
                                    <span class="text-sm text-red-500 ml-1"><%= product.discount_percentage %>% off</span>
                                  </div>
                                </div>
                          
                                <!-- Buttons -->
                                <div class="mt-2 flex justify-between items-center">
                                  <button onclick="event.stopPropagation(); buyNow('<%= product._id %>')" class="bg-blue-600 text-white text-sm px-3 py-1 rounded hover:bg-blue-700">Buy Now</button>
                                  <button class="text-gray-500 hover:text-red-500">❤️</button>
                                </div>
                              </div>
                            </div>
                          <% }); %>
                          
                    </div>
                </div>
              </div>

            
        </div>
        <footer class="ml-[40%] bg-gray-800 text-white py-4 mt-10 right-0">
            <div class="container text-center">
                <p class="text-sm">&copy; <span id="year"></span> SHOPPI. All rights reserved.</p>
            </div>
        </footer>
        <script src="/js/user/productDetails.js"></script>

    </body>

    </html>